# ZAlexanderV_infra
ZAlexanderV Infra repository

### ДЗ№2 
В рамках этого задания были выполнены задачи
 - развёртывание виртуальных машин в облаке Yandex
 - Настроен хост бастион
 - Подготовленна конфигурация для прямого подключения на внутренний хост
 - Настроен Pritun 
 - Выпущен сертификат для Pritun(не совсем выпущен)

#Yandex Cloud
Подключение ко внутрненним хостам доступно через следующие приёмы:
 - Туннелирование соединения
 - Проброс порта
 - Конфигурация соединения
 
 1. Туннелирование соединения возможно следующим образом
 ```
   ssh -i <key_path> -A -J [username@]<jump_host_ip> [username@]<internal_host_ip>
   
   ssh -i ~/.ssh/yc_key_priv -A -J appuser@158.160.52.160 appuser@10.128.0.30
 ```
 2. Проброс порта достигается следующими коммандами

```
   ssh -L 2222:10.128.0.30:22 158.160.52.160
   
```
  Затем подключение возможно на локальный порт 2222, который будет перенаправлен на внутренний хост.
 
 3. Конфигурация соединения возможно созданием файла .ssh/config и добавлением следующих строк
``` 
Host bastion
	HostName 158.160.52.160
	User appuser
	IdentityFile ~/.ssh/yc_key_priv
Host someinternalhost
	HostName 10.128.0.30
	User appuser
	IdentityFile ~/.ssh/yc_key_priv
```

Данные для подключения используя Pritun: 
 
bastion_IP = 158.160.52.160
someinternalhost_IP = 10.128.0.30


Доп задание:
Проблема выпуска сертификата через nip.op -> большое количество запросов. Let's Encrypt не выпускает сертификат, просит подождать. 